# üöÄ MVP –ü–ª–∞–Ω: –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è MVP (Minimum Viable Product)

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (~12-16 —á–∞—Å–æ–≤) –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π, –Ω–æ —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ß—Ç–æ –í–ö–õ–Æ–ß–ï–ù–û:**
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ **–î–ï–ú–û –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PayKeeper** (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
- ‚úÖ **–î–ï–ú–û –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AmoCRM** (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ —Å–¥–µ–ª–æ–∫)
- ‚úÖ **–ü—Ä–æ–¥–∞–∫—à–µ–Ω Email** (SendGrid –∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π SMTP)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞

**–ß—Ç–æ –ò–°–ö–õ–Æ–ß–ï–ù–û:**
- ‚ùå –°–ª–æ–∂–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT, OAuth –∏ —Ç.–¥.) - –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
- ‚ùå Deploy –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
- ‚ùå CI/CD pipeline
- ‚ùå –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

---

## üéØ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ü–µ–ª—å MVP

–°–æ–∑–¥–∞—Ç—å **–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø** –∑–∞ ~18-22 —á–∞—Å–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ –≤ –î–ï–ú–û —Ä–µ–∂–∏–º–µ, –≥–æ—Ç–æ–≤—ã–π –∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ —Ö–∞–∫–∞—Ç–æ–Ω–µ.

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã MVP

### **–≠—Ç–∞–ø 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**
**–í—Ä–µ–º—è:** ~2 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ Next.js 14 + TypeScript –ø—Ä–æ–µ–∫—Ç
- ‚úÖ Tailwind CSS + shadcn/ui
- ‚úÖ Docker Compose –¥–ª—è PostgreSQL
- ‚úÖ Prisma ORM setup
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

#### –§–∞–π–ª—ã:
```
lulu-booking/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ tailwind.config.ts
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ prisma/schema.prisma
‚îî‚îÄ‚îÄ app/
    ‚îú‚îÄ‚îÄ layout.tsx
    ‚îî‚îÄ‚îÄ page.tsx
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npm run dev
# ‚Üí localhost:3000 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

---

### **–≠—Ç–∞–ø 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + Backend API**
**–í—Ä–µ–º—è:** ~3 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ –ü–æ–ª–Ω–∞—è Prisma —Å—Ö–µ–º–∞ (User, Slot, Booking, Tariff)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ API Routes:
  - `GET /api/slots` - —Å–ø–∏—Å–æ–∫ —Å–ª–æ—Ç–æ–≤
  - `POST /api/bookings` - —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  - `GET /api/tariffs` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚úÖ Seed —Å–∫—Ä–∏–ø—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

#### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```typescript
// –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
function calculateBookingTotal(tariff, tickets) {
  return (
    tariff.adultPrice * tickets.adult +
    tariff.childPrice * tickets.child +
    tariff.infantPrice * tickets.infant
  );
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
function checkSlotAvailability(slot, ticketsCount) {
  return slot.availableCapacity >= ticketsCount;
}
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
npx prisma migrate dev
npx prisma db seed
curl http://localhost:3000/api/slots
# ‚Üí JSON —Å–æ —Å–ª–æ—Ç–∞–º–∏
```

---

### **–≠—Ç–∞–ø 3: Frontend - –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –≤—ã–±–æ—Ä —Å–ª–æ—Ç–æ–≤**
**–í—Ä–µ–º—è:** ~4 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ—Ç–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ State management (React Context –∏–ª–∏ Zustand)

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
```tsx
components/booking/
‚îú‚îÄ‚îÄ BookingCalendar.tsx    // –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ SlotCard.tsx           // –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–ª–æ—Ç–∞
‚îÇ   // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: –≤—Ä–µ–º—è, —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞, —Ü–µ–Ω—É
‚îú‚îÄ‚îÄ SlotList.tsx           // –°–ø–∏—Å–æ–∫ —Å–ª–æ—Ç–æ–≤ –Ω–∞ –¥–∞—Ç—É
‚îî‚îÄ‚îÄ AvailabilityBadge.tsx  // –ë–µ–π–¥–∂ "–°–≤–æ–±–æ–¥–Ω–æ X –∏–∑ Y"
```

#### UI –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üü¢ –ó–µ–ª–µ–Ω—ã–π - –º–Ω–æ–≥–æ –º–µ—Å—Ç (>50%)
- üü° –ñ–µ–ª—Ç—ã–π - –º–∞–ª–æ –º–µ—Å—Ç (10-50%)
- üî¥ –ö—Ä–∞—Å–Ω—ã–π/—Å–µ—Ä—ã–π - –∑–∞–Ω—è—Ç–æ (<10%)
- –ö–ª–∏–∫ –Ω–∞ —Å–ª–æ—Ç ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–æ—Ä–º–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –í–∏–¥–∏–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- –ö–ª–∏–∫ –Ω–∞ –¥–∞—Ç—É ‚Üí –≤–∏–¥–∏–º —Å–ª–æ—Ç—ã
- –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### **–≠—Ç–∞–ø 4: Frontend - –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
**–í—Ä–µ–º—è:** ~4 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ React Hook Form + Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—É–º–º—ã
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

#### –®–∞–≥–∏ —Ñ–æ—Ä–º—ã:

**–®–∞–≥ 1: –í—ã–±–æ—Ä –±–∏–ª–µ—Ç–æ–≤**
```tsx
<TicketSelector>
  –í–∑—Ä–æ—Å–ª—ã–π (1500‚ÇΩ) [- 2 +]
  –î–µ—Ç—Å–∫–∏–π (800‚ÇΩ)   [- 1 +]
  –î–æ 3 –ª–µ—Ç (0‚ÇΩ)    [- 0 +]
  
  –ò—Ç–æ–≥–æ: 3800‚ÇΩ
</TicketSelector>
```

**–®–∞–≥ 2: –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
```tsx
<ContactForm>
  –ò–º—è: [_________]
  –¢–µ–ª–µ—Ñ–æ–Ω: +7 (___) ___-__-__
  Email: [_________]
  
  ‚òë –°–æ–≥–ª–∞—Å–µ–Ω —Å –æ—Ñ–µ—Ä—Ç–æ–π
  ‚òë –°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ü–î
</ContactForm>
```

**–®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**
```tsx
<BookingSummary>
  –î–∞—Ç–∞: 15 —Ñ–µ–≤—Ä–∞–ª—è 2024
  –í—Ä–µ–º—è: 14:00
  –ë–∏–ª–µ—Ç—ã: 2 –≤–∑—Ä–æ—Å–ª—ã—Ö, 1 –¥–µ—Ç—Å–∫–∏–π
  –°—É–º–º–∞: 3800‚ÇΩ
  
  [–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø–ª–∞—Ç–∏—Ç—å]
</BookingSummary>
```

#### –í–∞–ª–∏–¥–∞—Ü–∏—è (Zod):
```typescript
const bookingSchema = z.object({
  name: z.string().min(2, '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞'),
  phone: z.string().regex(/^\+7\d{10}$/, '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç'),
  email: z.string().email('–ù–µ–≤–µ—Ä–Ω—ã–π email'),
  tickets: z.object({
    adult: z.number().min(0).max(10),
    child: z.number().min(0).max(10),
    infant: z.number().min(0).max(10)
  }).refine(t => t.adult + t.child + t.infant > 0, {
    message: '–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –±–∏–ª–µ—Ç'
  }),
  agreements: z.object({
    offer: z.literal(true),
    personalData: z.literal(true)
  })
});
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°—É–º–º–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∏–ª–µ—Ç–æ–≤
- –ù–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏–π

---

### **–≠—Ç–∞–ø 5: –î–ï–ú–û –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è PayKeeper**
**–í—Ä–µ–º—è:** ~3 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ `lib/paykeeper.ts` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è PayKeeper API
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ–ø–ª–∞—Ç–µ
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É"

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

**1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞**
```typescript
// lib/paykeeper.ts
export async function createPayment(booking: Booking) {
  const params = new URLSearchParams({
    sum: booking.totalAmount.toString(),
    orderid: booking.id,
    service_name: '–≠–∫—Å–∫—É—Ä—Å–∏—è –Ω–∞ —Ñ–µ—Ä–º—É –∞–ª—å–ø–∞–∫',
    client_email: booking.user.email,
    client_phone: booking.user.phone,
    client_name: booking.user.name
  });
  
  // –í –î–ï–ú–û —Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º sandbox PayKeeper
  const paymentUrl = `https://demo.paykeeper.ru/create/?${params}`;
  
  return paymentUrl;
}
```

**2. Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**
```typescript
// app/api/payments/webhook/route.ts
export async function POST(req: Request) {
  const data = await req.formData();
  const orderId = data.get('orderid');
  const status = data.get('status');
  
  if (status === 'success') {
    // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    await prisma.booking.update({
      where: { id: orderId },
      data: { 
        status: 'PAID',
        paidAt: new Date()
      }
    });
    
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å email
    await sendConfirmationEmail(orderId);
    
    // –û–±–Ω–æ–≤–∏—Ç—å AmoCRM
    await updateAmoCRMDeal(orderId, 'PAID');
  }
  
  return new Response('OK');
}
```

**3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏**
```tsx
// app/thank-you/page.tsx
export default function ThankYouPage() {
  return (
    <div className="text-center py-12">
      <h1>–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É! üéâ</h1>
      <p>
        –ß–µ–∫ –æ–ø–ª–∞—Ç—ã, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–∞–º—è—Ç–∫–∞ 
        –≤—ã—Å–ª–∞–Ω—ã –Ω–∞ {email}
      </p>
      <BookingDetails />
    </div>
  );
}
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞:
```env
# .env
PAYKEEPER_MODE=demo
PAYKEEPER_SERVER=demo.paykeeper.ru
PAYKEEPER_SECRET=demo_secret
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –ü–æ—Å–ª–µ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å" –ø–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É PayKeeper
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
- –ü–æ—Å–ª–µ "–æ–ø–ª–∞—Ç—ã" ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ thank-you
- –°—Ç–∞—Ç—É—Å –≤ –ë–î –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ PAID

---

### **–≠—Ç–∞–ø 6: –î–ï–ú–û –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AmoCRM**
**–í—Ä–µ–º—è:** ~3 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ `lib/amocrm.ts` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è AmoCRM API v4
- ‚úÖ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏ –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

**1. AmoCRM –∫–ª–∏–µ–Ω—Ç**
```typescript
// lib/amocrm.ts
class AmoCRMClient {
  private baseUrl: string;
  private accessToken: string;
  
  constructor() {
    this.baseUrl = `https://${process.env.AMOCRM_SUBDOMAIN}.amocrm.ru/api/v4`;
    this.accessToken = process.env.AMOCRM_ACCESS_TOKEN;
  }
  
  async createContact(user: User) {
    const response = await fetch(`${this.baseUrl}/contacts`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify([{
        name: user.name,
        custom_fields_values: [
          { field_id: 123456, values: [{ value: user.phone }] },
          { field_id: 123457, values: [{ value: user.email }] }
        ]
      }])
    });
    
    return await response.json();
  }
  
  async createDeal(booking: Booking, contactId: number) {
    const response = await fetch(`${this.baseUrl}/leads`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify([{
        name: `–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ #${booking.id}`,
        price: booking.totalAmount,
        status_id: 12345, // ID —ç—Ç–∞–ø–∞ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ"
        pipeline_id: 67890,
        _embedded: {
          contacts: [{ id: contactId }]
        },
        custom_fields_values: [
          { 
            field_id: 111111, // –í–∑—Ä–æ—Å–ª—ã–µ –±–∏–ª–µ—Ç—ã
            values: [{ value: booking.adultTickets }] 
          },
          { 
            field_id: 111112, // –î–µ—Ç—Å–∫–∏–µ –±–∏–ª–µ—Ç—ã
            values: [{ value: booking.childTickets }] 
          },
          { 
            field_id: 111113, // –î–∞—Ç–∞ —ç–∫—Å–∫—É—Ä—Å–∏–∏
            values: [{ value: booking.slot.date }] 
          },
          { 
            field_id: 111114, // –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
            values: [{ value: booking.paymentLink }] 
          }
        ]
      }])
    });
    
    return await response.json();
  }
  
  async updateDealStatus(dealId: number, statusId: number) {
    await fetch(`${this.baseUrl}/leads/${dealId}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `Bearer ${this.accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        status_id: statusId // ID —ç—Ç–∞–ø–∞ "–û–ø–ª–∞—á–µ–Ω–æ"
      })
    });
  }
}
```

**2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
```typescript
// app/api/bookings/route.ts
export async function POST(req: Request) {
  const data = await req.json();
  
  // 1. –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î
  const booking = await createBooking(data);
  
  // 2. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç –≤ AmoCRM
  const amoCRM = new AmoCRMClient();
  const contact = await amoCRM.createContact(booking.user);
  
  // 3. –°–æ–∑–¥–∞—Ç—å —Å–¥–µ–ª–∫—É
  const deal = await amoCRM.createDeal(booking, contact.id);
  
  // 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ID —Å–¥–µ–ª–∫–∏
  await prisma.booking.update({
    where: { id: booking.id },
    data: { amocrmDealId: deal.id }
  });
  
  // 5. –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É
  const paymentLink = await createPayment(booking);
  
  return Response.json({ booking, paymentLink });
}
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
```env
# .env
AMOCRM_SUBDOMAIN=your-subdomain
AMOCRM_CLIENT_ID=your-client-id
AMOCRM_CLIENT_SECRET=your-secret
AMOCRM_ACCESS_TOKEN=your-access-token
AMOCRM_REFRESH_TOKEN=your-refresh-token

# ID –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π (–ø–æ–ª—É—á–∏—Ç—å –∏–∑ AmoCRM)
AMOCRM_FIELD_ADULT_TICKETS=111111
AMOCRM_FIELD_CHILD_TICKETS=111112
AMOCRM_FIELD_EXCURSION_DATE=111113
AMOCRM_FIELD_PAYMENT_LINK=111114
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –ü–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚Üí –≤ AmoCRM –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–∞–∫—Ç
- –í AmoCRM —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–¥–µ–ª–∫–∞ –≤ —ç—Ç–∞–ø–µ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ"
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã ‚Üí —Å–¥–µ–ª–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "–û–ø–ª–∞—á–µ–Ω–æ"

---

### **–≠—Ç–∞–ø 7: –ü—Ä–æ–¥–∞–∫—à–µ–Ω Email (SendGrid)**
**–í—Ä–µ–º—è:** ~2 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SendGrid
- ‚úÖ Email —à–∞–±–ª–æ–Ω—ã (HTML)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ü–∞–º—è—Ç–∫–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—é
  - –ß–µ–∫ –æ–ø–ª–∞—Ç—ã

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

**1. SendGrid –∫–ª–∏–µ–Ω—Ç**
```typescript
// lib/email.ts
import sgMail from '@sendgrid/mail';

sgMail.setApiKey(process.env.SENDGRID_API_KEY);

export async function sendBookingConfirmation(booking: Booking) {
  const msg = {
    to: booking.user.email,
    from: 'noreply@lulu-alpaca.ru',
    subject: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è - –§–µ—Ä–º–∞ –∞–ª—å–ø–∞–∫ –õ—É–õ—É',
    html: `
      <!DOCTYPE html>
      <html>
      <body style="font-family: Arial, sans-serif;">
        <h1>–°–ø–∞—Å–∏–±–æ –∑–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ! ü¶ô</h1>
        
        <h2>–î–µ—Ç–∞–ª–∏ –≤–∞—à–µ–≥–æ –≤–∏–∑–∏—Ç–∞:</h2>
        <ul>
          <li><strong>–î–∞—Ç–∞:</strong> ${formatDate(booking.slot.date)}</li>
          <li><strong>–í—Ä–µ–º—è:</strong> ${formatTime(booking.slot.time)}</li>
          <li><strong>–ë–∏–ª–µ—Ç—ã:</strong> 
            ${booking.adultTickets} –≤–∑—Ä–æ—Å–ª—ã—Ö, 
            ${booking.childTickets} –¥–µ—Ç—Å–∫–∏—Ö
          </li>
          <li><strong>–°—É–º–º–∞:</strong> ${booking.totalAmount}‚ÇΩ</li>
        </ul>
        
        <h2>–ü–∞–º—è—Ç–∫–∞:</h2>
        <ul>
          <li>–ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∑–∞ 10 –º–∏–Ω—É—Ç –¥–æ –Ω–∞—á–∞–ª–∞</li>
          <li>–í–æ–∑—å–º–∏—Ç–µ —Å —Å–æ–±–æ–π –≤–æ–¥—É –∏ —Å–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–π –∫—Ä–µ–º</li>
          <li>–ú–æ–∂–Ω–æ –≤–∑—è—Ç—å —É–≥–æ—â–µ–Ω–∏–µ –¥–ª—è –∞–ª—å–ø–∞–∫ (–º–æ—Ä–∫–æ–≤—å, —è–±–ª–æ–∫–∏)</li>
          <li>–ê–¥—Ä–µ—Å: –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –¥–µ—Ä–µ–≤–Ω—è –õ—É—á–∫–∏</li>
        </ul>
        
        <p>–î–æ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —Ñ–µ—Ä–º–µ!</p>
        <p>–ö–æ–º–∞–Ω–¥–∞ –õ—É–õ—É ü¶ô</p>
      </body>
      </html>
    `
  };
  
  await sgMail.send(msg);
}
```

**2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ webhook**
```typescript
// app/api/payments/webhook/route.ts
if (status === 'success') {
  await prisma.booking.update({...});
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å email
  const booking = await prisma.booking.findUnique({
    where: { id: orderId },
    include: { user: true, slot: true }
  });
  
  await sendBookingConfirmation(booking);
}
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
```env
# .env
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxx
EMAIL_FROM=noreply@lulu-alpaca.ru
```

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –Ω–µ—Ç SendGrid):
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nodemailer —Å Gmail SMTP
import nodemailer from 'nodemailer';

const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASSWORD
  }
});
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã ‚Üí email –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ—á—Ç—É
- –ü–∏—Å—å–º–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ

---

### **–≠—Ç–∞–ø 8: –ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞**
**–í—Ä–µ–º—è:** ~3-4 —á–∞—Å–∞

#### –ß—Ç–æ —Å–æ–∑–¥–∞–µ–º:
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –≤ .env)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—Ç–∞–º–∏
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞–º–∏
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
app/admin/
‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx           # –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞
‚îú‚îÄ‚îÄ layout.tsx             # Layout —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ page.tsx               # –î–∞—à–±–æ—Ä–¥ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
‚îú‚îÄ‚îÄ slots/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # –°–ø–∏—Å–æ–∫ —Å–ª–æ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ new/
‚îÇ       ‚îî‚îÄ‚îÄ page.tsx       # –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ—Ç–∞
‚îú‚îÄ‚îÄ tariffs/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏
‚îî‚îÄ‚îÄ bookings/
    ‚îî‚îÄ‚îÄ page.tsx           # –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
```

#### –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
```typescript
// middleware.ts
export function middleware(request: NextRequest) {
  const { pathname } = request.nextUrl;
  
  if (pathname.startsWith('/admin')) {
    const session = request.cookies.get('admin_session');
    
    if (!session && pathname !== '/admin/login') {
      return NextResponse.redirect(new URL('/admin/login', request.url));
    }
  }
}

// app/admin/login/page.tsx
async function handleLogin(username: string, password: string) {
  if (
    username === process.env.ADMIN_USERNAME && 
    password === process.env.ADMIN_PASSWORD
  ) {
    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å cookie
    cookies().set('admin_session', 'authenticated', {
      httpOnly: true,
      maxAge: 60 * 60 * 24 // 24 —á–∞—Å–∞
    });
    
    redirect('/admin');
  }
}
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∫–∏:

**1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–∞–º–∏**
```tsx
// app/admin/slots/page.tsx
export default function SlotsPage() {
  const slots = await prisma.slot.findMany({
    include: { tariff: true }
  });
  
  return (
    <div>
      <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–∞–º–∏</h1>
      <Button onClick={() => router.push('/admin/slots/new')}>
        –°–æ–∑–¥–∞—Ç—å —Å–ª–æ—Ç
      </Button>
      
      <Table>
        <TableHeader>
          <TableRow>
            <TableHead>–î–∞—Ç–∞</TableHead>
            <TableHead>–í—Ä–µ–º—è</TableHead>
            <TableHead>–î–æ—Å—Ç—É–ø–Ω–æ –º–µ—Å—Ç</TableHead>
            <TableHead>–¢–∞—Ä–∏—Ñ</TableHead>
            <TableHead>–î–µ–π—Å—Ç–≤–∏—è</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {slots.map(slot => (
            <TableRow key={slot.id}>
              <TableCell>{formatDate(slot.date)}</TableCell>
              <TableCell>{formatTime(slot.time)}</TableCell>
              <TableCell>
                {slot.availableCapacity} / {slot.totalCapacity}
              </TableCell>
              <TableCell>{slot.tariff.name}</TableCell>
              <TableCell>
                <Button onClick={() => editSlot(slot.id)}>
                  –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </Button>
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  );
}
```

**2. –ü—Ä–æ—Å–º–æ—Ç—Ä –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π**
```tsx
// app/admin/bookings/page.tsx
export default function BookingsPage() {
  const bookings = await prisma.booking.findMany({
    include: { user: true, slot: true },
    orderBy: { createdAt: 'desc' }
  });
  
  return (
    <div>
      <h1>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
      
      <Table>
        <TableHeader>
          <TableRow>
            <TableHead>ID</TableHead>
            <TableHead>–î–∞—Ç–∞ —ç–∫—Å–∫—É—Ä—Å–∏–∏</TableHead>
            <TableHead>–ö–ª–∏–µ–Ω—Ç</TableHead>
            <TableHead>–ë–∏–ª–µ—Ç—ã</TableHead>
            <TableHead>–°—É–º–º–∞</TableHead>
            <TableHead>–°—Ç–∞—Ç—É—Å</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {bookings.map(booking => (
            <TableRow key={booking.id}>
              <TableCell>{booking.id.slice(0, 8)}</TableCell>
              <TableCell>
                {formatDate(booking.slot.date)} {formatTime(booking.slot.time)}
              </TableCell>
              <TableCell>
                {booking.user.name}<br/>
                {booking.user.phone}
              </TableCell>
              <TableCell>
                –í: {booking.adultTickets}, 
                –î: {booking.childTickets}
              </TableCell>
              <TableCell>{booking.totalAmount}‚ÇΩ</TableCell>
              <TableCell>
                <Badge variant={booking.status === 'PAID' ? 'success' : 'warning'}>
                  {booking.status}
                </Badge>
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  );
}
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
```env
# .env
ADMIN_USERNAME=admin
ADMIN_PASSWORD=hackathon2024
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –õ–æ–≥–∏–Ω admin/hackathon2024 ‚Üí –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ
- –í–∏–¥–∏–º –≤—Å–µ —Å–ª–æ—Ç—ã –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ª–æ—Ç

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ MVP

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | –°—Ç–∞—Ç—É—Å |
|------|-------|------------|--------|
| 1. –§—É–Ω–¥–∞–º–µ–Ω—Ç | 2—á | –ü—Ä–æ–µ–∫—Ç + –ë–î | ‚úÖ –ë–∞–∑–æ–≤—ã–π |
| 2. Backend API | 3—á | API + –ª–æ–≥–∏–∫–∞ | ‚úÖ –ü–æ–ª–Ω—ã–π |
| 3. –ö–∞–ª–µ–Ω–¥–∞—Ä—å | 4—á | –í—ã–±–æ—Ä —Å–ª–æ—Ç–æ–≤ | ‚úÖ –ü–æ–ª–Ω—ã–π |
| 4. –§–æ—Ä–º–∞ | 4—á | –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ –ü–æ–ª–Ω—ã–π |
| 5. PayKeeper | 3—á | –û–ø–ª–∞—Ç–∞ (–¥–µ–º–æ) | ‚úÖ –î–ï–ú–û |
| 6. AmoCRM | 3—á | CRM (–¥–µ–º–æ) | ‚úÖ –î–ï–ú–û |
| 7. Email | 2—á | SendGrid | ‚úÖ –ü—Ä–æ–¥–∞–∫—à–µ–Ω |
| 8. –ê–¥–º–∏–Ω–∫–∞ | 3-4—á | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | ‚úÖ –ë–∞–∑–æ–≤–∞—è |

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~21-22 —á–∞—Å–∞

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP

### Must Have (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–ª–æ—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ–∑–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PayKeeper (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AmoCRM (—Å–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫)
- ‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ª–æ—Ç–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –≤—ã–±–æ—Ä ‚Üí –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### Should Have (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ Loading states
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π UI

### Nice to Have (–µ—Å–ª–∏ —É—Å–ø–µ–µ–º):
- ‚≠ï –°–∏—Å—Ç–µ–º–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- ‚≠ï Webhook –æ—Ç PayKeeper —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production
- ‚≠ï –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É

---

## üöÄ –ü–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
```bash
# –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –∑–∞—Ä–∞–Ω–µ–µ:
- SendGrid API key
- AmoCRM access token (—á–µ—Ä–µ–∑ OAuth –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é)
- PayKeeper demo credentials
```

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –î–µ–Ω—å 1 (10 —á–∞—Å–æ–≤):
- –≠—Ç–∞–ø—ã 1-4: –§—É–Ω–¥–∞–º–µ–Ω—Ç + Backend + Frontend

# –î–µ–Ω—å 2 (8 —á–∞—Å–æ–≤):
- –≠—Ç–∞–ø—ã 5-6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

# –î–µ–Ω—å 3 (4 —á–∞—Å–∞):
- –≠—Ç–∞–ø—ã 7-8: Email + –ê–¥–º–∏–Ω–∫–∞ + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ü–æ–ª–Ω—ã–π user flow –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

### 4. –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è:
- –î–µ–º–æ –≤–∏–¥–µ–æ –∏–ª–∏ –∂–∏–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
- –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω–∫—É

---

## üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è MVP

```env
# Database
DATABASE_URL="postgresql://postgres:password@localhost:5432/lulu_booking"

# AmoCRM (–î–ï–ú–û)
AMOCRM_SUBDOMAIN="your-subdomain"
AMOCRM_ACCESS_TOKEN="your-access-token"
AMOCRM_FIELD_ADULT_TICKETS="111111"
AMOCRM_FIELD_CHILD_TICKETS="111112"
AMOCRM_FIELD_EXCURSION_DATE="111113"
AMOCRM_FIELD_PAYMENT_LINK="111114"

# PayKeeper (–î–ï–ú–û)
PAYKEEPER_MODE="demo"
PAYKEEPER_SERVER="demo.paykeeper.ru"
PAYKEEPER_SECRET="demo_secret"

# SendGrid (–ü–†–û–î–ê–ö–®–ï–ù)
SENDGRID_API_KEY="SG.xxxxxxxxxxxxx"
EMAIL_FROM="noreply@lulu-alpaca.ru"

# Admin
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="hackathon2024"

# App
NEXT_PUBLIC_APP_URL="http://localhost:3000"
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–µ–π

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- [ ] –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–æ—Ç—ã
- [ ] –ú–æ–∂–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏—é
- [ ] –§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –°—É–º–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] –í AmoCRM —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–¥–µ–ª–∫–∞
- [ ] Email –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ "–æ–ø–ª–∞—Ç—ã"
- [ ] –ê–¥–º–∏–Ω–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### UI/UX:
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- [ ] Loading states –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- [ ] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [ ] README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- [ ] .env.example –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ö–∞–∫–∞—Ç–æ–Ω—É!

–≠—Ç–æ—Ç MVP –ø–ª–∞–Ω –¥–∞—ë—Ç —Ç–µ–±–µ:
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –î–ï–ú–û —Ä–µ–∂–∏–º–µ
- ‚úÖ –ü—Ä–æ–¥–∞–∫—à–µ–Ω email —Ä–∞—Å—Å—ã–ª–∫—É
- ‚úÖ –ü—Ä–æ—Å—Ç—É—é, –Ω–æ —Ä–∞–±–æ—á—É—é –∞–¥–º–∏–Ω–∫—É
- ‚úÖ –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞ ~22 —á–∞—Å–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —Å –≠—Ç–∞–ø–∞ 1? üöÄ

